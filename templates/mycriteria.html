{%extends 'layout.html'%}

{% block body %}
  {% if session.logged_in %}
    <h1>{{session.name}}'s Criteria</h1>
  {% else %}
    <h1>Criteria</h1>
  {% endif %}
  <div class="criteria-form">
    <form action="" method="POST">
      <div class="criteria_container">
        {% for category in categoryList %}
          <div class="criteria-label">{{category}}</div><br />
          <input type="range" min="1" max="100" value="1" class="slider" id="criteria_{{category}}" name="criteria_{{category}}">
        {% endfor %}
      </div>
      <button type="submit" class="btn btn-primary" id="criteria_save_button">Save</button>
    </form>

    <br />
    <!-- Success and Error Messages -->
    <div id="successAlert" class="alert alert-success" role="alert" style="display:none;"></div>
	  <div id="errorAlert" class="alert alert-danger" role="alert" style="display:none;"></div>
    <br />
  </div>

  <script>
    window.onload = function loadCriteria(){
      // Store session variable
      var session = {{ session | tojson }}; // session variable
      var categoryList = {{ categoryList | tojson }}; // list of categories

      // For each rating, set the the corresponding slider value
      for(i=0; i < categoryList.length; i++){
        var slider_name = "criteria_"+categoryList[i];
        document.getElementById(slider_name).value = session[categoryList[i]];
      }
    }
  </script>

{% endblock %}
